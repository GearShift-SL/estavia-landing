---

---

<!-- Consulting Contact Form -->
<form id="consultingContactForm" class="w-full space-y-4">
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <div>
      <label for="firstName" class="block mb-2 text-sm font-medium text-gray-900">
        Nombre <span class="text-red-600">*</span>
      </label>
      <input
        type="text"
        id="firstName"
        name="firstName"
        required
        class="bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-3"
      />
    </div>

    <div>
      <label for="lastName" class="block mb-2 text-sm font-medium text-gray-900">
        Apellidos <span class="text-red-600">*</span>
      </label>
      <input
        type="text"
        id="lastName"
        name="lastName"
        required
        class="bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-3"
      />
    </div>
  </div>

  <div>
    <label for="email" class="block mb-2 text-sm font-medium text-gray-900">
      Email <span class="text-red-600">*</span>
    </label>
    <input
      type="email"
      id="email"
      name="email"
      required
      class="bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-3"
    />
  </div>

  <div>
    <label for="company" class="block mb-2 text-sm font-medium text-gray-900">
      Empresa <span class="text-red-600">*</span>
    </label>
    <input
      type="text"
      id="company"
      name="company"
      required
      class="bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-3"
    />
  </div>

  <div>
    <label for="phone" class="block mb-2 text-sm font-medium text-gray-900"> Teléfono </label>
    <input
      type="tel"
      id="phone"
      name="phone"
      class="bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-3"
    />
  </div>

  <div>
    <label for="message" class="block mb-2 text-sm font-medium text-gray-900">
      Describe tu proyecto <span class="text-red-600">*</span>
    </label>
    <textarea
      id="message"
      name="message"
      rows="4"
      required
      placeholder="Describe tus necesidades específicas, sistemas actuales, objetivos del proyecto..."
      class="bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-3"
    ></textarea>
  </div>

  <div class="flex items-start">
    <div class="flex items-center h-5">
      <input
        id="privacy"
        type="checkbox"
        required
        class="w-4 h-4 border border-gray-300 rounded bg-gray-50 focus:ring-3 focus:ring-blue-300"
      />
    </div>
    <label for="privacy" class="ml-2 text-sm text-gray-700">
      Acepto la <a href={`/privacy/`} class="text-blue-600 hover:underline">política de privacidad</a>
      y el tratamiento de mis datos para recibir información comercial.
      <span class="text-red-600">*</span>
    </label>
  </div>

  <div class="pt-4">
    <button
      type="submit"
      class="w-full cta-gradient font-semibold text-sm px-6 py-3 text-center rounded-lg transition-all duration-200 hover:shadow-lg"
    >
      Solicitar consulta gratuita
    </button>
  </div>
</form>

<div id="consultingFormStatus" class="mt-4 text-center hidden">
  <p
    id="consultingSuccessMessage"
    class="hidden bg-green-50 border border-green-200 text-green-800 rounded-lg p-4 items-center justify-center"
  >
    <svg class="w-5 h-5 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
      <path
        fill-rule="evenodd"
        d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
        clip-rule="evenodd"></path>
    </svg>
    <span
      >¡Gracias! Hemos recibido tu solicitud. Un especialista se pondrá en contacto contigo en las próximas 24 horas.</span
    >
  </p>
  <p id="consultingErrorMessage" class="hidden bg-red-50 border border-red-200 text-red-800 rounded-lg p-4">
    <svg class="w-5 h-5 mr-2 inline" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
      <path
        fill-rule="evenodd"
        d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zm-1 9a1 1 0 01-1-1v-4a1 1 0 112 0v4a1 1 0 01-1 1z"
        clip-rule="evenodd"></path>
    </svg>
    Ha ocurrido un error al enviar tu mensaje. Por favor, inténtalo de nuevo.
  </p>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const consultingForm = document.getElementById('consultingContactForm') as HTMLFormElement;
    const formStatus = document.getElementById('consultingFormStatus');
    const successMessage = document.getElementById('consultingSuccessMessage');
    const errorMessage = document.getElementById('consultingErrorMessage');

    if (consultingForm && formStatus && successMessage && errorMessage) {
      consultingForm.addEventListener('submit', async (e) => {
        e.preventDefault();

        // Gather form data
        const firstName = (document.getElementById('firstName') as HTMLInputElement)?.value?.trim();
        const lastName = (document.getElementById('lastName') as HTMLInputElement)?.value?.trim();
        const email = (document.getElementById('email') as HTMLInputElement)?.value?.trim();
        const company = (document.getElementById('company') as HTMLInputElement)?.value?.trim();
        const message = (document.getElementById('message') as HTMLTextAreaElement)?.value?.trim();

        // Validation
        if (!firstName || !lastName || !email || !company || !message) {
          alert('Por favor, completa todos los campos obligatorios');
          return;
        }

        const formData = {
          contact_list_name: 'estavia_consulting',
          name: `${firstName} ${lastName}`,
          email: email,
          phone: (document.getElementById('phone') as HTMLInputElement)?.value || '',
          message: message,
          other_fields: { company: company },
        };

        try {
          const response = await fetch('https://waitlist.hlab.es/contact/messages/', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify(formData),
          });

          formStatus.classList.remove('hidden');

          if (response.ok) {
            // Hide the form
            consultingForm.classList.add('hidden');

            // Show success message
            successMessage.classList.remove('hidden');
            successMessage.classList.add('flex');
            errorMessage.classList.add('hidden');
          } else {
            successMessage.classList.add('hidden');
            errorMessage.classList.remove('hidden');
            errorMessage.classList.add('flex');
          }
        } catch (error) {
          console.error('Error:', error);
          formStatus.classList.remove('hidden');
          successMessage.classList.add('hidden');
          errorMessage.classList.remove('hidden');
          errorMessage.classList.add('flex');
        }
      });
    }
  });
</script>
